<div class="d-collections" *ngIf="!loading">
    <app-heading 
      [heading]="heading"
      [backButton]="true"
      [pdcCycle]="false"
      [escalation]="true"
    >
    </app-heading> 
    <div class="d-chart d-marginBottom">
      <div class="d-chart__section">
        <h2 class="d-chart__heading heading1">
            Invoice to Collection
        </h2>
        <ng-container>
          <app-chart-pie
            [loaded] = 'chartLoaded'
            [loadData]="'Selected Clients'" 
            [chartLoaded$]='loading$'   
            >
          </app-chart-pie>
        </ng-container>
      </div>
      <div class="d-chart__section">
          <h2 class="d-chart__heading heading1">
              Total Invoices
          </h2>
          <app-chart-pie
            [loaded] = 'chartLoaded'
            [chartDatas$] ='tableContent$'
            [loadData]="'Total Invoices Ops Manager'" 
            [chartLoaded$]='loading$'     
            >
          </app-chart-pie>
      </div>
      <div class="d-chart__section">
          <h2 class="d-chart__heading heading1">
              Aging Payments
          </h2>
          <app-chart-bar>
          </app-chart-bar> 
      </div>
    </div>
    <div class="d-clientInfo d-marginBottom">
      <div class="d-clientInfo__block">
        <span class="d-clientInfo__head">Client ID :</span> 
        <span class="d-clientInfo__text">OOCDL/E.I.CD Pvt Ltd</span>
      </div>
      <div class="d-clientInfo__block">
        <span class="d-clientInfo__head">Corp ID :</span> 
        <span class="d-clientInfo__text">CORP/DP.C</span>
      </div>
      <div class="d-clientInfo__block">
        <span class="d-clientInfo__head">Client Name :</span> 
        <span class="d-clientInfo__text">Yellowchalk UI/UX Design Studio</span>
      </div>
      <div class="d-clientInfo__block">
        <span class="d-clientInfo__head">Assigned Anchor :</span> 
        <span class="d-clientInfo__assign">
          <a href="javascript:void(0)">
            Shanshank Kumar 
          </a>
          <a href="javascript:void(0)" (click)="toggleAssign($event);">
            +2
          </a>
        </span>
        <span class="d-iconedit icon-edit"></span>
        <div class="d-clientInfo__assignlist" *ngIf="assignList">
          <ul>
            <li><a href="">Shobha Ganapathy</a></li>
            <li><a href="">Amit Kumar</a></li>
          </ul>
        </div>
      </div>
      <div class="d-clientInfo__block">
        <span class="d-clientInfo__head">General Manager : </span> 
        <span class="d-clientInfo__text"> Hitesh</span>
      </div>
      <div class="d-clientInfo__block">
        <span class="d-clientInfo__head">Team : </span> 
        <span class="d-clientInfo__text"> Asmall</span>
      </div>
      <div class="d-clientInfo__block">
        <span class="d-clientInfo__head">Registration Date : </span> 
        <span class="d-clientInfo__text"> 15/06/2018</span>
      </div>
      <div class="d-clientInfo__block">
        <span class="d-clientInfo__head">Agrement Expiring : </span> 
        <span class="d-clientInfo__text">  15/08/2019</span>
      </div>
      <div class="d-clientInfo__block">
        <span class="d-clientInfo__head">Phone Number : </span> 
        <span class="d-clientInfo__text">  9099009900</span>
      </div>
      <div class="d-clientInfo__block">
        <span class="d-clientInfo__head">Email : </span> 
        <span class="d-clientInfo__text"> abc@gmail.com</span>
      </div>
    </div>

    <div class="d-tabs__contenttable d-clientInfo__table d-marginBottom">
        <table>
            <tr>
                <th [attr.colspan]="tableHeaders.length" class="d-tabs__head">
                    <app-tableheader
                        [headerContent]="tableHeaders"
                        [module]="'untagged'"
                        [textAlign]="'center'"
                    >
                    </app-tableheader>
                </th>
            </tr>
            <tr>
              <td [attr.colspan]="tableHeaders.length">
                <div>
                  <table>
                    <tr>
                      <td *ngFor="let item of clientPayDated; let i = index;">
                        <ul class="d-clientInfo__tableblock">
                          <li>
                            <span>
                                Target Date: 
                            </span>
                            {{item.targetdate}}
                          </li>
                          <li>
                            <span>
                                Action Date: 
                            </span>
                            {{item.actiondate}}
                          </li>
                          <li>
                            <span>
                                Status: 
                            </span>
                            {{item.status}}
                          </li>
                          <li>
                            <span>
                                Aging Days: 
                            </span>
                            {{item.agingdays}}
                          </li>
                        </ul>
                      </td>
                    </tr>
                  </table>
                </div>
              </td>
            </tr>
        </table>
    </div>
    <div class="d-asscoiatelist d-marginBottom">
      <div class="d-asscoiatelist__head">
          <h3 class="d-heading3">
              Associates with Yellowchalk UI/UX Design Studio
          </h3> 
          <div class="d-spacer"></div>   
          <div class="d-associate__actions">
              <app-searchinvoices
                  [place]="'Search'"
              >
              </app-searchinvoices>
            <div class="d-input__button">
              <button class="d-button">
                  <span>Add New</span>  
              </button>
            </div>
          </div>
      </div>
    </div>
    <div class="d-tabs__contenttable d-associate d-marginBottom">
        <table>
            <tr>
                <th [attr.colspan]="associateHeader.length" class="d-tabs__head">
                    <app-tableheader
                        [headerContent]="associateHeader"
                        [module]="'untagged'"
                        [textAlign]="'left'"
                    >
                    </app-tableheader>
                </th>
            </tr>
            <tr *ngFor="let assoc of associateList">
              <td [attr.colspan]="associateHeader.length">
                <div class="d-associate__list">
                  <table>
                    <tr>
                      <td>
                        <a href="#" class="d-linkcolor">
                          {{assoc.assoc_id}}
                        </a>
                      </td>
                      <td>
                          {{assoc.assoc_name}}
                      </td>
                      <td>
                          {{assoc.inv_date}}
                      </td>
                      <td>
                          <span class="d-active">{{assoc.status}}</span>
                      </td>
                      <td class="d-textcenter">
                        <a 
                          href="javascript:void(0)" 
                          class="d-view"
                          (click)="assoc_popup(assoc)" 
                        >
                          View
                        </a>
                      </td>
                    </tr>
                  </table>
                </div>
              </td>
            </tr>
        </table>
    </div>


    <div class="d-popup" [ngClass]="{'active':assocPopup}">
        <div class="d-popup__overlay" (click)="closePopup()">
        </div>
        <div class="d-popup__container">
            <div class="d-popup__head">
              <h3>
                  Associate: {{assocInfo.assoc_name}}
              </h3>
            </div>
            <div class="d-popup__body">
              <div class="d-popup__assoc-head">
                  <div class="d-clientInfo__block">
                    <span class="d-clientInfo__head">Associate ID :</span> 
                    {{assocInfo.assoc_id}}  
                  </div>
                  <div class="d-clientInfo__block">
                    <span class="d-clientInfo__head">Associate Name :</span> 
                    {{assocInfo.assoc_name}}  
                  </div>
                  <div class="d-clientInfo__block">
                    <span class="d-clientInfo__head">Joining Date :</span> 
                    {{assocInfo.joining_date}} 
                  </div>
                  <div class="d-clientInfo__block">
                    <span class="d-clientInfo__head">Status :</span> 
                    <span class="d-active">{{assocInfo.status}}</span>
                  </div>
              </div>
              <div class="d-popup__assoc-body">
                  <div class="d-clientInfo__block">
                    <span class="d-clientInfo__head">Client ID :</span> 
                    {{assocInfo.client_id}} 
                  </div>
                  <div class="d-clientInfo__block">
                    <span class="d-clientInfo__head">Client Name :</span> 
                    {{assocInfo.client_name}} 
                  </div>
                  <div class="d-clientInfo__block">
                    <span class="d-clientInfo__head">Associated Ops Team :</span> 
                    <a href="#">{{assocInfo.assoc_ops_team}}</a>
                  </div>
                  <div class="d-clientInfo__block">
                    <span class="d-clientInfo__head">Corp Id :</span> 
                    {{assocInfo.crop_id}} 
                  </div>
                  <div class="d-clientInfo__block">
                    <span class="d-clientInfo__head">General Manager :</span> 
                    {{assocInfo.general_manager}} 
                  </div>
                  <div class="d-clientInfo__block">
                    <span class="d-clientInfo__head">Team :</span> 
                    {{assocInfo.team}} 
                  </div>
              </div>
              <div class="d-popup__footer">
                <div class="d-input__button">
                    <button class="d-button">
                        <span>Disassociate From Client</span>  
                    </button>
                  </div>
              </div>
            </div>
            <div class="d-popup__close">
              <span class="icon-closepopup" (click)="closePopup()">
              </span>
            </div>
        </div>
    </div>

</div>
